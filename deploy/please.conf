WSGIPythonHome /opt/regluit/ENV
WSGISocketPrefix /opt/regluit

<VirtualHost *:80>

ServerName please.unglueit.com
ServerAdmin info@gluejar.com

RewriteEngine On
RewriteRule ^/$ https://please.unglue.it/ [R=301]
RewriteRule /admin(.*) https://please.unglue.it/admin$1 [R=301]
RewriteRule /accounts(.*) https://please.unglue.it/accounts$1 [R=301]

WSGIDaemonProcess regluit processes=4 threads=4 python-eggs=/tmp/regluit-python-eggs
WSGIScriptAlias / /opt/regluit/deploy/please.wsgi

<Directory /opt/regluit/deploy>
  <Files please.wsgi>
    Require all granted
  </Files>
</Directory>

<Directory /opt/regluit/static>
  Options Indexes FollowSymLinks
  AllowOverride None

 Require all granted
</Directory>

Alias /static /var/www/static

</VirtualHost>

<VirtualHost _default_:443>

SSLEngine on
SSLProtocol All -SSLv2 -SSLv3
SSLCertificateFile    /etc/ssl/certs/server.crt
SSLCertificateKeyFile /etc/ssl/private/server.key
#SSLCertificateChainFile /etc/ssl/certs/gd_bundle.crt


<Directory /opt/regluit/static>
  Options Indexes FollowSymLinks
  AllowOverride None

  Require all granted
</Directory>

Alias /static /var/www/static

BrowserMatch "MSIE [2-6]" \
	nokeepalive ssl-unclean-shutdown \
	downgrade-1.0 force-response-1.0
# MSIE 7 and newer should be able to use keepalive
BrowserMatch "MSIE [17-9]" ssl-unclean-shutdown

#ErrorLog ${APACHE_LOG_DIR}/please.unglue.it-ssl-error.log
ErrorLog "|/usr/bin/cronolog /var/log/apache2/%Y%m%d_error.log"
LogLevel warn
#CustomLog ${APACHE_LOG_DIR}/please.unglue.it-ssl-access.log combined
CustomLog "|/usr/bin/cronolog /var/log/apache2/%Y%m%d_access.log" combined

</VirtualHost>
